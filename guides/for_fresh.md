# 後輩のみなさんへ

## はじめに

このプロジェクトを見つけてくれてありがとうございます。  
OICareerLogは、Team IKZM_OICが令和7年度の卒業研究として開発した、就職活動報告プラットフォームです。

このドキュメントでは、環境構築の手順だけでなく、開発を進める上でのアドバイスも記載しています。
わからないことがあれば、遠慮なく連絡してください。~~その気になったときに返します~~

---

## このプロジェクトから学べること

- **MVCアーキテクチャ**: モデル・ビュー・コントローラーの分離を実践
- **セキュリティ対策**: CSRF対策、XSS対策、ホワイトリスト式認証の実装
- **データベース設計**: 論理削除、トランザクション制御の実装
- **OAuth 2.0**: Google認証の実装方法
- **チーム開発**: Gitを使った複数人での開発経験

## JSPについて
中身を見てなんじゃこりゃ！となった人もいるかもしれません。  
怒られそうなので早めに自白しておきますが、ここは全然授業で習っていないフレームワークであるBootStrap 5.3を使用しています。最初は面倒かと思いますが、学習コストもそれほど高くないと思いますし、慣れればとても楽にいい感じのUIができると思います。  
無理に仲良くなる必要はないです。

参考資料:  
[プログラミングのフレームワークとは？言語別におすすめも紹介](https://www.sejuku.net/blog/30) by sejuku.net   
[BootStrap](https://getbootstrap.com/docs/5.3/getting-started/introduction/) by Bootstrap

---

# 環境構築手順

このガイドは、OIC情報システム学科の後輩の皆さんが、OICareerLogを自分の環境で動かすための手順をまとめたものです。

## 前提条件

以下がインストールされていることを確認してください：
- Eclipse（授業で使っているバージョン）
- MySQL 8.0
- Java 21（JDK）

---

## ステップ0: GitHubを理解しよう

### GitHubとは？
**GitHub**は、プログラムのソースコードを保存・共有・管理するためのWebサービスです。

**わかりやすく例えると：**
- **Google Drive** = 文書やファイルを保存する場所
- **GitHub** = プログラムのコードを保存する場所  
＊文書の共有、編集、履歴管理などもできます。

**GitHubでできること：**
- 他人、プロが作ったOSSコードをダウンロード(クローン)
- コードの変更履歴を確認
- チームでコードを共有して開発

### GitHubアカウントの作成

1. [GitHub公式サイト](https://github.com/) にアクセス
2. 右上の **Sign up** をクリック
3. 案内に従って登録してください

---

## ステップ1: リポジトリをクローン
gitの操作は様々な手段があります。  
コマンドで行う方法が一般的ですが、ここでは慣れ親しみやすいEclipseのGUIで行う方法を説明します。  
参考資料:Zenn[クローンとは](https://zenn.dev/gachigachi/articles/329952348817d7) by gachigachi氏

### EclipseとGitHubを接続する
この記事の手順1までを参考に、Githubのアクセストークンを取得してください。  
[Qiita Eclipseで作成した新規プロジェクトをGithubと連携する方法](https://qiita.com/yasushi-jp/items/806230a77a2be3855c9d) by yasushi-jp氏  
取得したアクセストークンは、大事に保管してください。  
(これが漏れるとGithub上のアイテムを誰でも操作できるようになります)

1. Eclipseを起動
2. gitパースペクティブまたはgit リポジトリビューを開く
3. git リポジトリビューで画像のボタンを選択  
   ![clone01](/images/clone_01.png)  
4. クローンURIを選択
5. ロケーション>URIに`https://github.com/KuwadaKohei/OICareerLog.git`を入力
6. 認証>ユーザーにGithubのアカウント名を、パスワードに発行したアクセストークンを入力して次へ
(セキュアストアに保管にチェックを入れると、次回からは入力不要)
7. 取得ブランチの選択画面で、`master`を選択して次へ
8. 宛先>ディレクトリに保存先の場所を指定して次へ(C:\Users\ユーザー名\git推奨、なければ勝手に作られると思います)
9. 初期ブランチ名を`master`に変更して完了

参考資料:[ブランチとは](https://it-biz.online/it-skills/branch) by it-biz.online

---

## ステップ2: Mavenプロジェクトとしてインポート
今の時点ではまだ自分のPC内にコードをとってきただけです。  
これをEclipseにMavenプロジェクトとしてインポートしていきます。  
参考資料:Qiita[Maven（Apache Maven）とは](https://qiita.com/emily-08/items/712f1d4a37858ef850fc) by emily-08氏

1. gitリポジトリービュー上で追加されたリポジトリを右クリック
2. プロジェクトのインポートを選択
3. インポート>mavenになっていることを確認して完了ボタンを押す
4. ルートディレクトリにpom.xmlがあれば成功
5. プロジェクトを右クリックして、プロパティ>Javaのビルドパス>ライブラリ>JREシステムライブラリ>編集を選択>JavaSE-21を選択して完了(17でもまあ動きます)
6. プロジェクトを右クリックして、プロパティ>Maven>ビルドパスの更新を選択  

サーブレットコンテナが読み込まれず、型解決ができない場合は、プロパティ>ターゲット・ランタイムをなんかいい感じに設定してください

---
## ステップ3: データベースのセットアップ

コマンドラインでdocs/SETUP_DATABASE.sqlを実行 (ここはもう習っていると思うので省略します)

---

## ステップ4: 環境変数の設定

1. `.env.example` を `.env` にコピー
2. `.env` を開いて、以下を自分の環境に合わせて編集：
   ~~~
   IKZM_OICAREER_DB_URL=jdbc:mysql://localhost:3306/IKZM_OICareerLog
   IKZM_OICAREER_DB_USER=root
   IKZM_OICAREER_DB_PASSWORD=MySQLのパスワード
   ~~~

3. Google OAuthの認証情報を設定（後述）

---

## ステップ5: Google OAuth 2.0の設定

1. [Google Cloud Console](https://console.cloud.google.com) にアクセス
2. 新規プロジェクトを作成
3. 「APIとサービス」→「認証情報」→「認証情報を作成」→「OAuth 2.0 クライアントID」
   http://localhost:8080/OICareerLog/Login
   ```
6. 作成後、クライアントIDとシークレットをコピー(大事に保管してください)
7. `.env` ファイルに貼り付け：
   
**参考記事**: [GoogleのOAuth設定方法（Zenn）](https://zenn.dev/milky/articles/google-client-oauth)

---

## Webサーバー・本番環境の構築について
どの粒度で説明するか悩みましたが、非常に長くなる上に要件等もその時々で変わると思うので、[README.md](./README.md)の技術構成を参考にして構築してください。

## JDBCドライバについて
普段MySQL Connector/Jを使用して学習している皆さんにとって、MariaDB Java Clientというライブラリは見慣れないものかもしれませんが、これらには互換性があり通常使う分には同じような振る舞いをします。
MySQL Connector/JはGPL v2の下に提供されるライセンスなので、OSS化する必要がありました。  
今回は学校の資産としたかったので、LGPL v2.1であるMariaDB Java Clientに差し替えました。

## トラブルシューティング

### エラー: "MariaDB JDBCドライバーの読み込みに失敗しました"
→ `.env` ファイルがプロジェクト直下にあることを確認してください。

### エラー: "認証に失敗しました"
→ Google OAuth 2.0のリダイレクトURIが正しいか確認してください。

### ビルドエラーが出る
→ プロジェクトを右クリック → **Maven** → **Update Project** を実行してください。

---

# 開発を進める上でのアドバイス

コードを読む際のポイントや、つまづきやすい箇所については、[こちら](./development_advice.md)にまとめています。

## わからないことがあれば

Koh.dev13 at gmail.com または メールアドレスが24から始まる桒田 晃平のGoogleチャットまでご連絡ください。  
あとAIに聞いてみるのもいいと思います。

